"0","library(httr)"
"0","library(purrr)"
"2","
Attaching package: ‘purrr’

"
"2","The following object is masked from ‘package:testthat’:

    is_null

"
"0","#Singstats endpoint"
"0","singstat_endpoint <- function(API_type) {"
"0","  base <- ""https://www.tablebuilder.singstat.gov.sg/publicfacing/rest/timeseries"""
"0","  endpoint <- paste(base, API_type, sep = ""/"", collapse = """")"
"0","  endpoint"
"0","}"
"0",""
"0","#Singstat Resource ID "
"0",""
"0","resourceID_endpoint <- singstat_endpoint(""resourceId"")"
"0",""
"0",""
"0","#Search options can be ""all"", ""Title"", or ""Variable"""
"0","queries <- list(""keyword"" = ""Employment"","
"0","                ""searchOption"" = ""all"")"
"0",""
"0",""
"0","request <- GET(resourceID_endpoint, query = queries)"
"0","response <- content(request)"
"0",""
"0",""
"0","response_sorted <- purrr::transpose(response$records)"
"0",""
"0",""
"0","ID_response_title_DF <- data.frame('resource_ID' = unlist(response_sorted$resourceId),"
"0","                                   'title' = unlist(response_sorted$title),"
"0","                                   stringsAsFactors = FALSE"
"0","                                   )"
"0",""
"0","#Singstat metadata"
"0","metadata_endpoint <- singstat_endpoint(""metadata"")"
"0",""
"0","resource_ID <- 15808"
"0",""
"0","meta_resource_endpoint <- paste(metadata_endpoint,"
"0","                                resource_ID,"
"0","                                sep = ""/"","
"0","                                collapse = """""
"0","                                )"
"0",""
"0","request_meta <- GET(meta_resource_endpoint)"
"0","x <- content(request_meta)"
"0",""
"0",""
"0","#Singstat tabledata"
"0","table_endpoint <- singstat_endpoint(""tabledata"")"
"0",""
"0","resource_ID_1 <- 15808"
"0",""
"0","table_resource_endpoint <- paste(table_endpoint, resource_ID_1, sep = ""/"", collapse = """")"
"0",""
"0","table_params <- list('variables' = 'M600981.3'#,"
"0","#                     'between' = '',"
"0","#                     'sortBy' = '',"
"0","#                     'offset' = '',"
"0","#                     'limit' = '',"
"0","#                     'timeFilter' = '',"
"0","#                     'search' = 'pre-paid'"
"0","                      )"
"0",""
"0","request_table <- GET(table_resource_endpoint, query = table_params)"
"0","y <- content(request_table)"
